(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5271],{5693:function(e,t,s){Promise.resolve().then(s.bind(s,3441))},3441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),o=s(1396),a=s.n(o),n=s(1490),l=s(7777),i=s(2265),u=s(7146),d=s(6998),c=s(4463),f=s(3333),m=s(7415),h=s(4033),x=s(2651);function b(e){let{slug:t}=e,[o,b]=(0,i.useState)(null),[p,g]=(0,i.useState)(!1),[v,E]=(0,i.useState)(null),[j,w]=(0,i.useState)(null),k=(0,h.useRouter)(),y="https://api.analogueshifts.com/api/tools/vetting/show/"+t,N="https://api.analogueshifts.com/api"+"/tools/vetting/edit/".concat(t);(0,i.useEffect)(()=>{v&&w(e=>({...e,vet_questions:v}))},[v]),(0,i.useEffect)(()=>{n.Z.get("analogueshifts")&&b(JSON.parse(n.Z.get("analogueshifts")))},[]),(0,i.useEffect)(()=>{o&&q()},[o]);let q=()=>{let e=s(1630),t={method:"GET",url:y,headers:{Authorization:"Bearer "+o.token}};g(!0),e.request(t).then(e=>{let t=e.data.vet,s=n.Z.get("vetEditingData");if(s){let e=JSON.parse(s);w(e),E(e.vet_questions)}else t&&(n.Z.set("vetEditingData",JSON.stringify(t)),w(t),E(t.vet_questions));g(!1)}).catch(e=>{g(!1),m.toast.error(e.message,x.D)})},D=()=>{let e=s(1630),t={method:"PUT",url:N,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.token},data:j};g(!0),e.request(t).then(e=>{g(!1),m.toast.success("Your Vet has been edited successfully",x.D),n.Z.remove("vetEditingData"),k.push("/tools/vet")}).catch(e=>{console.log(e),m.toast.error(e.message,x.D),g(!1)})};return(0,r.jsxs)(l.Z,{user:o,header:(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 leading-tight",children:"Vetting"}),children:[p&&(0,r.jsx)(f.Z,{}),(0,r.jsxs)("div",{className:"bg-[#FEFEFE] mt-2 border border-[#E7E7E7] h-max px-4 lg:px-10 py-5 rounded-3xl",children:[(0,r.jsxs)("div",{className:"w-full mb-7 flex justify-between items-center h-14",children:[(0,r.jsx)(a(),{href:"/tools/vet/create",className:"w-1/2 h-full relative before:absolute before:h-[5px] before:w-full before:bottom-0 before:left-0 before:bg-tremor-background-darkYellow flex justify-center before:rounded-2xl items-center text-tremor-brand-activeLink font-medium text-sm md:text-base",children:"Create Form"}),(0,r.jsx)(a(),{href:"/tools/vet/edit/".concat(t,"/preview"),className:"w-1/2 h-full  flex justify-center items-center text-tremor-brand-inActiveLink font-medium text-sm md:text-base",children:"Preview"})]}),j&&(0,r.jsx)(u.Z,{type:"edit",data:j,setData:w,newVetData:j})]}),v&&(0,r.jsxs)("div",{className:"w-full mt-6   flex-wrap gap-5 flex justify-center md:justify-between items-center bg-[#FEFEFE] border border-[#E7E7E7] h-max px-4 lg:px-10 py-5 rounded-3xl",children:[(0,r.jsx)("span",{className:"font-medium md:text-lg text-base text-tremor-brand-boulder950",children:"Vet Questions"}),(0,r.jsxs)("button",{onClick:()=>{E(e=>[{id:crypto.randomUUID(),question:"",type:"Short Text",answer:"",required:!1},...e])},className:"h-10 cursor-pointer rounded-full px-8 flex justify-center items-center gap-3 border border-tremor-background-darkYellow font-normal md:text-base text-sm bg-transparent text-tremor-background-darkYellow",children:["Add question",(0,r.jsx)("i",{className:"fas fa-plus"})]})]}),v&&(0,r.jsx)("div",{className:"w-full mt-5",children:(0,r.jsx)(c.t.Group,{onReorder:E,values:v,children:v.map(e=>(0,r.jsx)(d.Z,{data:e,vetQuestions:v,setVetQuestions:E,newVetData:j,updateType:"edit"},e.id))})}),j&&(0,r.jsx)("button",{onClick:()=>{if(""===j.title){m.toast.error("Each vet must have a title! kindly fill out the description form above.",x.D);return}for(let e of j.vet_questions)if(""===e.question.trim()){m.toast.error("Each Question must have a question value. Kindly review all questions",{position:"top-right",autoClose:3e3});return}D()},className:"px-6 text-[#FEFEFE] mt-5 ml-auto text-base duration-300 hover:scale-105 font-normal flex items-center gap-2 h-10 bg-tremor-background-darkYellow rounded-full border-none cursor-pointer",children:"Edit vet"})]})}}},function(e){e.O(0,[3572,7902,1176,1630,413,2303,813,3141,8689,5969,7777,1615,2971,2472,1744],function(){return e(e.s=5693)}),_N_E=e.O()}]);